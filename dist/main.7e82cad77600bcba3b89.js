(()=>{"use strict";(()=>{document.querySelector(".cats__list");let e=document.querySelector(".modal__btn");const t=(e,t)=>{let a=document.querySelector(".cats__load"),c=document.querySelector(".cats__add");a.innerHTML="";let n="";n=!0===e.favourite?'<i class="fa-solid fa-heart"></i>':'<i class="fa-regular fa-heart"></i>';let s="";s=e.img_link?e.img_link:"../images/baseCat.png";const l=document.createElement("li");l.className="cats__item";const o=document.createElement("div");o.className="cats__photo",e.img_link&&(o.style.backgroundImage=`url(${e.img_link})`);const i=document.createElement("div");i.className="cats__desc";const r=document.createElement("h3");r.className="cats__name",r.textContent=e.name;const d=document.createElement("div");d.className="cats__like",d.innerHTML=n;const m=document.createElement("div");m.className="cats__rate";for(let t=0;t<10;t++){let a=document.createElement("i");t<e.rate?a.innerHTML='<i class="fa-solid fa-star"></i>':a.innerHTML='<i class="fa-regular fa-star"></i>',m.append(a)}const u=document.createElement("div");u.className="cats__modal";const p=document.createElement("div");p.className="cats__container",p.innerHTML='<div class="modal__close"><i class="fa-solid fa-xmark"></i></div>';const _=document.createElement("div");_.className="cat__modalPhoto",_.innerHTML=`<img src=${e.img_link} alt="">`;const y=document.createElement("div");y.className="cat__modalDesc",y.innerHTML=`<h3>${e.name}</h3><p>${e.age} y.o.</p><p>${e.description}</p>`,p.append(_,y),u.append(p),document.querySelector(".cats").append(u),i.append(r,d),l.append(o,i,m),document.querySelector(".cats__list").append(l),c.style.display="block",l.addEventListener("click",(()=>{u.style.display="block"}));let h=l.querySelector("i");h.addEventListener("click",(t=>{let a={};"fa-solid fa-heart"==h.className?(h.className="fa-regular fa-heart",a={favourite:!1}):"fa-regular fa-heart"==h.className&&(h.className="fa-solid fa-heart",a={favourite:!0}),fetch("https://sb-cats.herokuapp.com/api/2/SmirnovMaks/update/"+e.id,{method:"PUT",body:JSON.stringify(a),headers:{"Content-type":"application/json; charset=UTF-8"}})}))};fetch("https://sb-cats.herokuapp.com/api/2/SmirnovMaks/show").then((e=>e.json())).then((e=>{e.data.forEach((e=>{t(e)}))})),e.addEventListener("click",(e=>{e.preventDefault();const a=document.querySelector(".modal"),c=a.querySelector(".inputName"),n=a.querySelector(".inputPhoto"),s=a.querySelector(".inputDesc"),l=a.querySelector(".inputAge");let o={id:Math.ceil(100*Math.random()+100),favourite:!1,rate:1};c.value&&n.value&&s.value&&l.value&&(o.name=c.value,o.img_link=n.value,o.description=s.value,o.age=+l.value,fetch("https://sb-cats.herokuapp.com/api/2/SmirnovMaks/add",{method:"POST",body:JSON.stringify(o),headers:{"Content-type":"application/json; charset=UTF-8"}}),a.style.display="none",t(o))}))})(),(()=>{const e=document.querySelector(".cats__add"),t=document.querySelector(".modal"),a=document.querySelector(".modal__close");t.addEventListener("click",(e=>{e.target.closest(".modal__inner")||(t.style.display="none")})),a.addEventListener("click",(()=>{t.style.display="none"})),e.addEventListener("click",(e=>{t.style.display="block",(({timing:e,draw:t,duration:a})=>{let c=performance.now();requestAnimationFrame((function n(s){let l=(s-c)/a;l>1&&(l=1);let o=e(l);t(o),l<1&&requestAnimationFrame(n)}))})({duration:500,timing:e=>e,draw(e){t.style.opacity=e}})}))})()})();